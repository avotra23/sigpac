<div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>N° Chrono</th>
                <th>Date</th>
                <th>Demandeur / Entité</th>
                <th>Objet</th>
                <th>Décision</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for csca in registres %}
            <tr>
                <td><span class="badge bg-info text-dark">{{ csca.n_chrono }}</span></td>
                <td>{{ csca.date_csca|date:"d/m/Y" }}</td>
                <td>
                    <small><b>D:</b> {{ csca.demandeur }}</small><br>
                    <small><b>E:</b> {{ csca.entite }}</small>
                </td>
                <td>{{ csca.objet|truncatechars:30 }}</td>
                <td>{{ csca.decision|truncatechars:30 }}</td>
                <td>
                    <button class="btn btn-sm btn-light border"><i class="bi bi-eye"></i></button>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="text-center">Aucun dossier CSCA trouvé.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
        if (!$.fn.DataTable.isDataTable('#tableCSCA')) {
            $('#tableCSCA').DataTable({
                "language": {
                    "url": "//cdn.datatables.net/plug-ins/1.13.6/i18n/fr-FR.json"
                },
                "order": [[ 0, "desc" ]], // Trie par N° CSCA par défaut
                "pageLength": 10,
                "dom": 'rtip' // Cache la barre de recherche native car vous en avez une personnalisée
            });
        }
    });
</script>